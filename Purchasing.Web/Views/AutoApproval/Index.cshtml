@model Purchasing.Web.Controllers.Dev.AutoApprovalListModel

@{
    ViewBag.Title = "Auto Approvals";

}

@section SubNav
{
	<ul class='navigation'>
		<li>@Html.ActionLink("Create New", "Create")</li>
	</ul>
}

@section AdditionalScripts
{
    <script type="text/javascript">
        $(function () {
            $("#filter_container").accordion({ collapsible: true, autoHeight: false, active: false });
        });
    </script>
}

<div id="filter_container">
    <h3><a href="#">Filters</a></h3>
    @using(Html.BeginForm("Index", "AutoApproval", FormMethod.Post))
    {
        @Html.AntiForgeryToken();

            <ul>        
                <li>
                    <div class="editor-label">
                        
                    </div>
                    <div class="editor-field">
                        @Html.CheckBoxFor(x => x.ShowAll) @Html.Label("Show All")
                    </div>
                </li>

                <li>
                    <label>&nbsp;</label>
			        <input class="button" type="submit" value="Apply" />
                </li>
            </ul>
    }
</div>

<table class='datatable'>
	<thead>
		<tr>
			<th></th>

			<th>
				MaxAmount
			</th>

			<th>
				LessThan
			</th>

			<th>
				Equal
			</th>
            <th>
                Account
            </th>
            <th>
                User
            </th>
            @if((Model.ShowAll))
            { 
			<th>
				IsActive
			</th>
            }
			<th>
				Expiration
			</th>


			<th></th>

		</tr>
	</thead>
	<tbody>
@foreach(var item in Model.AutoApprovals)
{
		<tr>
			<td>
				<a href='@Url.Action("Details", new { id = item.Id })'>
					<img src='@Url.Image("details.png")' />
				</a>
				<a href='@Url.Action("Edit", new { id = item.Id })'>
					<img src='@Url.Image("edit.png")' />
				</a>
			</td>

			<td>
				@String.Format("{0:F}", item.MaxAmount)
			</td>

			<td>
				@item.LessThan
			</td>

			<td>
				@item.Equal
			</td>

            <td>
                @(item.Account == null ? "No Account" : item.Account.NameAndId)
            </td>

            <td>
                @(item.TargetUser == null ? "No User" : item.TargetUser.FullNameAndId)
            </td>
			@if((Model.ShowAll))
            {
            <td>
				@item.IsActive
			</td>
            }    
			<td>
				@String.Format("{0:g}", item.Expiration)
			</td>

		
					<td>
						<a href='@Url.Action("Delete", new { id = item.Id })'>
							<img src='@Url.Image("delete.png")' />
						</a>
					</td>
		

		</tr>
}
	</tbody>
</table>