@model ReviewOrderViewModel

@{
    ViewBag.Title = "Order Review";
}

@section SubNav
{
	<ul class="navigation">
        <li>@Html.ActionLink("Duplicate", "Copy", new {id=Model.Order.Id})</li>
	    <li>@Html.ActionLink("Back to List", "Index")</li>
	</ul>
}

@section AdditionalScripts
{
    <script src="@Url.Script("fileuploader.js")" type="text/javascript"></script>
    <script src="@Url.Script("OrderReview.js")" type="text/javascript"></script>
    <link href="@Url.Css("fileuploader/fileuploader.css")" rel="stylesheet" type="text/css" />
    <style type="text/css">
        #orn {margin: 1em 0;}
        #orn ul {padding: 0;}
        #orn li {margin: 0;}
        #order-details .col1, #order-details .col2 {width: 49.25%; vertical-align: top; text-align: left;}
        #order-details .col1 .display-form, #order-details .col2 .display-form {height: 140px; margin-bottom: 0;}
        
        .item-footer {background-color:#014A81; color: white; }
        .item-footer .label {text-align: right;font-weight: bold;}
        
        .extra-info .line-url, .extra-info .line-notes {display:inline-block; width: 49%; text-align: left;}
        .extra-info .line-url {margin-right: 10px;}
        
        .row-item {background-color: lightgray;}
        .row-split {width: 400px; border: 1px solid lightgray; background-color: lightgreen;}
        .row-split-prob {background-color: lightcoral;}
        .row-split table {border: none;}
        #history table, #notes table, #approvals table { border: none; }
        #history table tr, #notes table tr, #approvals table tr {border-bottom: 1px solid lightgray;}
        #history table tr > td:first-child, #notes table tr > td:first-child, #approvals table tr > td:first-child { width: 150px;}
        #history table tr > td:last-child, #notes table tr > td:last-child #approvals table tr > td:last-child { width: 150px;}
        
        .acct-info .account, .acct-info .subaccount, .acct-info .project {margin-right: 20px;}
        
        .approval-complete { background-color: lightcyan;}
    </style>

    <script type="text/javascript">
        
        var userUrl = "@Url.Action("SearchUsers", "Workgroup")";
        var rerouteUrl = "@Url.Action("ReRouteApproval")";

        $(function () {
            purchasing.options({
                AddCommentUrl: "@Url.Action("AddComment", "Order")",
                ReRouteApprovalUrl: "@Url.Action("ReRouteApproval")",
                FileUploadUrl: "@Url.Action("UploadFile", "Order", new {orderId = Model.Order.Id})",
                AntiForgeryToken: $('input[name="__RequestVerificationToken"]').val(),
                CanEdit: '@Model.CanEditOrder' === 'True'
            });

            purchasing.init();
        });
        
    </script>
}

@Html.Partial("_ReviewOrderDetails")

@Html.Partial("_ReviewLineItems")

@Html.Partial("_ReviewLineSplits")

@Html.Partial("_ReviewControlledSubstances")

@Html.Partial("_ReviewCustomFields")

@Html.Partial("_ReviewApprovals")

@Html.Partial("_ReviewNotes")

@Html.Partial("_ReviewAttachments")

@Html.Partial("_ReviewHistory")

@Html.Partial("_ReviewSubmit")