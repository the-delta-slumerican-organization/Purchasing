@model Purchasing.Web.Controllers.WorkgroupManageModel

@{
	ViewBag.Title = "Manage Workgroup";
}

@helper RowFor(string name, int count, string action = null){
    <tr @Html.Raw(count == 0 ? "class='none-warning'" : string.Empty)>
        <td>@name:</td>
        <td>@count</td>
        <td>@Html.ActionLink("Edit", action ?? name, "WorkgroupManagement", null, null, action == null ? null : name, new { id = Model.Workgroup.Id }, null)</td>
    </tr>
}

@section SubNav
{
	<ul class="navigation">
		<li>@Html.ActionLink("Accounts", "Accounts", "WorkgroupManagement", new { id = Model.Workgroup.Id }, null)</li>
		<li>@Html.ActionLink("Vendors", "Vendors", "WorkgroupManagement", new { id = Model.Workgroup.Id }, null)</li>
		<li>@Html.ActionLink("Addresses", "Addresses", "WorkgroupManagement", new { id = Model.Workgroup.Id }, null)</li>
		<li>@Html.ActionLink("People", "People", "WorkgroupManagement", new { id = Model.Workgroup.Id }, null)</li>
	</ul>
}

@section AdditionalScripts{
    
    <style>
        .workgroup-info {
            border-collapse: collapse;
            border-spacing: 0;
            width: auto;
            border: none;
        }
        
        .none-warning
        {
            color: #900;
        }
    </style>
}

<h3>Manage workgroup @Model.Workgroup.Name</h3>
<br/><br/>
<h4>Workgroup Associations</h4>
<table class="workgroup-info">
    <tbody>
        @RowFor("Organizations", Model.OrganizationCount)
        @RowFor("Accounts", Model.AccountCount)
        @RowFor("Vendors", Model.VendorCount)
        @RowFor("Addresses", Model.AddressCount)
    </tbody>
</table>

<br/><br/>
<h4>Workgroup People</h4>
<table class="workgroup-info">
    <tbody>  
        @RowFor("Users", Model.UserCount, "People")
        @RowFor("Approvers", Model.ApproverCount, "People")
        @RowFor("Account Managers", Model.AccountManagerCount, "People")
        @RowFor("Purchasers", Model.PurchaserCount, "People")
    </tbody>
</table>